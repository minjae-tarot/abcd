<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

  body{
    font-family: Arial, sans-serif;
    background:#1e1e3f;
    color:white;
    text-align:center;
    padding:20px;
    margin:0;
  }

  h1{margin-bottom:10px;}

  button {
      width: 50px;        /* ë²„íŠ¼ ê°€ë¡œ */
      height: 50px;       /* ë²„íŠ¼ ì„¸ë¡œ = ê°€ë¡œ, ì •ì‚¬ê°í˜• */
      font-size: 10px;     /* ê¸€ì í¬ê¸° */
      margin: 30px;
      border: none;
      border-radius: 50%;  /* ì™„ì „ ì›í˜• */
      cursor: pointer;
      background: gold;
      display: inline-flex;      /* ê¸€ì ì¤‘ì•™ ì •ë ¬ */
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3); /* ì…ì²´ê° ì˜µì…˜ */
      transition: transform 0.2s ease;
  }

  button:hover {
      transform: scale(1.1);
  }

  #deck{
    display: grid;
    grid-template-columns: repeat(13, 75px);
    grid-gap: 10px 12px;
    justify-content: center;
    max-width: 1100px;
    margin: 20px auto;
  }

  .card{
    width: 70px;
    height: 105px;
    border-radius: 8px;
    cursor: pointer;
    object-fit: cover;
    border: 2px solid transparent;
    box-sizing: border-box;
    transition: transform 0.15s ease;
  }
  .card:hover:not(.selected){
    transform: scale(1.1);
    z-index: 10;
  }
  .selected{
    border-radius:50px;
    border-color: gold;
    cursor: default;
  }

  #resultArea{
    position: relative;
    width: 560px;
    height: 380px;
    margin: 100px auto;
    display: none;
    background: #2a2a4a;
    border-radius: 15px;
  }
  .result-card{
    position: absolute;
    width: 100px;
    height: 170px;
    object-fit: cover;
    border-radius: 8px;
  }

  #pos1 { top: 120px; left: 190px; }    /* í˜„ì¬ ìƒí™© */
  #pos2 { top: 100px; left: 270px; }    /* ì¥ì• ë¬¼ */
  #pos6 { top: 120px; left: 390px; }    /* ê°€ê¹Œìš´ ë¯¸ë˜ */
  #pos4 { top: 120px; left: 70px; }     /* ê³¼ê±° */
  #pos3 { top: 280px; left: 230px; }    /* ë¬´ì˜ì‹ */
  #pos5 { top: -60px; left: 230px; }    /* ì™¸ë©´ */

  @media (max-width: 720px) {

    #deck {
      grid-template-columns: repeat(6, 1fr);  /* ğŸ‘ˆ ê°€ë¡œ 6ì¥ */
      grid-auto-rows: auto;
      grid-gap: 8px;
      max-width: 100%;
      padding: 0 10px;
    }

    .card {
      width: 100%;
      height: auto;
      aspect-ratio: 2 / 3;   /* ì¹´ë“œ ë¹„ìœ¨ ìœ ì§€ */
    }

     body {
    overflow-x: hidden;   /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ì œê±° */
  }

  #resultArea {
    width: 90vw;          /* í™”ë©´ ê¸°ì¤€ */
    height: calc(95vw * 0.68);  /* 560:380 ë¹„ìœ¨ ìœ ì§€ */
    margin: 40px auto;
    position: relative;
  }

  .result-card {
    width: 18vw;
    height: auto;
  }
   #pos1 { top: 32%; left: 34%; }
  #pos2 { top: 26%; left: 48%; }
  #pos6 { top: 32%; left: 70%; }
  #pos4 { top: 32%; left: 8%; }
  #pos3 { top: 70%; left: 40%; }
  #pos5 { top: -10%; left: 40%; }

  }

</style>

</head>
<body>

<button id="shuffleBtn" onclick="shuffleDeck()"></button>

<div id="deck"></div>

<div id="resultArea">
  <img id="pos1" class="result-card" alt="í˜„ì¬ ìƒí™©">
  <img id="pos2" class="result-card" alt="ì¥ì• ë¬¼">
  <img id="pos3" class="result-card" alt="ë¬´ì˜ì‹">
  <img id="pos4" class="result-card" alt="ê³¼ê±°">
  <img id="pos5" class="result-card" alt="ì™¸ë©´">
  <img id="pos6" class="result-card" alt="ê°€ê¹Œìš´ ë¯¸ë˜">
</div>

<script>
  const deckDiv = document.getElementById("deck");
  const resultArea = document.getElementById("resultArea");
  const shuffleBtn = document.getElementById("shuffleBtn"); // ğŸ‘ˆ ë²„íŠ¼ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°

  const backImage = "https://i.namu.wiki/i/Bk8bSK1DdAvvH3vPzUGOQvtysbsovnMhjna7OfK6yGJ-OqX7VO54t7HkLcR5R88VFCCU8TCox_LYRDsBzVWrLA.webp";
  const baseURL = "https://beming-dev.github.io/tarot-app/cards/img(";
  const ext = ").jpg";

  let deckOrder = [];
  let selectedCards = [];
  const maxSelect = 6;

  function initDeck(){
    deckOrder = [];
    for(let i=1;i<=78;i++){
      deckOrder.push(i);
    }
    renderDeck();
  }

 function renderDeck(){
    deckDiv.innerHTML = "";
    selectedCards = [];
    resultArea.style.display = "none";
    
    // ì…”í”Œ í›„ ì¹´ë“œë¥¼ ë¿Œë¦´ ë•Œ ë± ì˜ì—­ì€ ë³´ì´ê²Œ ìœ ì§€
    deckDiv.style.display = "grid"; 

    deckOrder.forEach(num=>{
      const img = document.createElement("img");
      img.className = "card";
      img.src = backImage;
      img.dataset.num = num;
      img.addEventListener("click", () => selectCard(img));
      deckDiv.appendChild(img);
    });
  }

  function selectCard(img){
    if(selectedCards.length >= maxSelect) return;
    const num = img.dataset.num;
    if(selectedCards.includes(num)) return;

    selectedCards.push(num);
    img.classList.add("selected");
    img.style.visibility = "hidden"; 

    if(selectedCards.length === maxSelect){
      showResult();
    }
  }

  function showResult(){
    const posIds = ["pos1","pos2","pos3","pos4","pos5","pos6"];
    for(let i=0; i < maxSelect; i++){
      const cardImg = document.getElementById(posIds[i]);
      cardImg.src = baseURL + selectedCards[i] + ext;
    }
    
    deckDiv.style.display = "none";    // ë± ìˆ¨ê¸°ê¸°
    resultArea.style.display = "block"; // ê²°ê³¼ ë³´ì´ê¸°
    shuffleBtn.style.display = "inline-flex"; // ğŸ‘ˆ ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
    
    resultArea.scrollIntoView({behavior:"smooth"});
  }

  function resetResult(){
    const posIds = ["pos1","pos2","pos3","pos4","pos5","pos6"];

    posIds.forEach(id => {
      const cardImg = document.getElementById(id);
      cardImg.src = "";   // ê²°ê³¼ ì¹´ë“œ ì´ë¯¸ì§€ ì œê±°
    });

    resultArea.style.display = "none";  // ê²°ê³¼ ì˜ì—­ ìˆ¨ê¹€
  }

  function shuffleDeck(){
    shuffleBtn.style.display = "none"; 
    
    resetResult(); 
    for(let i=deckOrder.length -1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [deckOrder[i], deckOrder[j]] = [deckOrder[j], deckOrder[i]];
    }
    renderDeck();
  }

  initDeck();

</script>

</body>
</html>
